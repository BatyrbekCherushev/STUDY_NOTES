
---
## <h2 style = 'text-align:center'><b>üìå –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç–µ–º—É</b></h2>
---
* [Python documentation - Context Manager Types](https://docs.python.org/3.7/library/stdtypes.html#typecontextmanager)
* [Python documentation - 3.3.9. With Statement Context Managers](https://docs.python.org/3.7/reference/datamodel.html#context-managers)
* [Python documentation - The with statement](https://docs.python.org/3.7/reference/compound_stmts.html#with)
* [Python documentation - contextlib ‚Äî Utilities for with-statement contexts](https://docs.python.org/3.7/library/contextlib.html)
---
## <h2 style = 'text-align:center'><b>üìå –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è</b></h2>
---
–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ñ –º–µ–Ω–µ–¥–∂–µ—Ä–∏ –≤ Python ‚Äî —Ü–µ –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—Ä—É–≤–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏, —Ç–∞–∫–∏–º–∏ —è–∫

* –§–∞–π–ª–∏: open()
* –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤: - ` with lock`
* –ë–∞–∑–∏ –¥–∞–Ω–∏—Ö: –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è/–∑–∞–∫—Ä–∏—Ç—Ç—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π - `with connection`
* –¢–∏–º—á–∞—Å–æ–≤–∞ –∑–º—ñ–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–º—ñ–Ω–∞ —Ä–æ–±–æ—á–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó)
* –ú–µ—Ä–µ–∂–µ–≤—ñ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è
* –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤

**–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä** ‚Äî —Ü–µ –æ–±‚Äô—î–∫—Ç, —è–∫–∏–π —Ä–µ–∞–ª—ñ–∑—É—î –º–µ—Ç–æ–¥–∏ `__enter__()` —Ç–∞ `__exit__()`. –¶–µ–π –æ–±‚Äô—î–∫—Ç –≤–∏–∑–Ω–∞—á–∞—î —â–æ —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏:

* –ø—Ä–∏ –≤—Ö–æ–¥—ñ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª, —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è, –≤–∑—è—Ç–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è);

* –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–∑–∞–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª, –≤—ñ–¥–ø—É—Å—Ç–∏—Ç–∏ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è, –∑–Ω—è—Ç–∏ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è), –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Å—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞.

–©–æ–± –±—É—Ç–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º, –æ–±‚Äô—î–∫—Ç –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –¥–≤–∞ –º–µ—Ç–æ–¥–∏:

* `__enter__(self)` ‚Äî –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤—Ö–æ–¥—ñ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç (–ø—ñ—Å–ª—è with);

* `__exit__(self, exc_type, exc_value, traceback)` ‚Äî –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ (–Ω–∞–≤—ñ—Ç—å —É —Ä–∞–∑—ñ –ø–æ–º–∏–ª–∫–∏).
    * `exc_type, exc_value, traceback` - –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —á–µ—Ä–µ–∑ —è–∫—ñ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –¥–∞–Ω—ñ –ø—Ä–æ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è, –≤ —Ä–∞–∑—ñ –π–æ–≥–æ –≤–∏–Ω–∏–∫–Ω–µ–Ω–Ω—è
    * —è–∫—â–æ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è –Ω–µ —Å—Ç–∞–ª–æ—Å—å, –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è None

**–ü–æ—Ä—è–¥–æ–∫ —Ä–æ–±–æ—Ç–∏ –∑ `with` –≤–∏—Ä–∞–∑–æ–º**
``` python
with A() as a, B() as b:
    suite
```
- `A()` - –≤–∏–∫–ª–∏–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- `as a` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–º–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–∏—Å–≤–æ—é—î—Ç—å—Å—è –≤ `a`
- `A() as a, B() as b` - –≤ –æ–¥–Ω–æ–º—É —Ä—è–¥–∫—É –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä—ñ–≤

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –¥–µ–∫—ñ–ª—å–∫–æ–º–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–º–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏:
```python
with A() as a:
    with B() as b:
        suite
```

**–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –º–µ—Ç–æ–¥—É `with` –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:**

1. –û—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–±'—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞.
2. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞–≥—ñ—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ `__exit__` —Ü—å–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞, –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ –∑ –≤–∏—Ä–∞–∑—É `with`.
3. –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è –º–∞–≥—ñ—á–Ω–∏–π –º–µ—Ç–æ–¥ `__enter__` (–æ–±'—î–∫—Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞).
4. –Ø–∫—â–æ –≤—ñ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î —è–∫–µ—Å—å –∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–æ –≤–æ–Ω–æ –ø—Ä–∏—Å–≤–æ—é—î—Ç—å—Å—è —É –≤–∏—Ä–∞–∑ `as`.
>—è–∫—â–æ –º–µ—Ç–æ–¥ `__enter__` –≤–∏–∫–æ–Ω–∞–≤—Å—è –±–µ–∑ –ø–æ–º–∏–ª–∫–∏, —Ç–æ –º–µ—Ç–æ–¥ `__exit__`, –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è –ø—Ä–∏ –±—É–¥—å —è–∫–∏—Ö –æ–±—Å—Ç–∞–≤–∏–Ω–∞—Ö. –ù–∞–≤—ñ—Ç—å —è–∫—â–æ –≤ —Å–µ—Ä–µ–¥–∏–Ω—ñ –±–ª–æ–∫—É –∫–æ–¥—É, —â–æ –≤–∫–ª–∞–¥–µ–Ω–æ –ø—ñ—Å–ª—è `with`, –≤–∏–Ω–∏–∫–Ω–µ –ø–æ–º–∏–ª–∫–∞.
5. –í–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –±–ª–æ–∫—É –∫–æ–¥—É `suite`.
6. –í–∏–∫–æ–Ω–∞–Ω–Ω—è –º–µ—Ç–æ–¥—É `__exit__`
>–Ø–∫—â–æ –±–ª–æ–∫ –∫–æ–¥—É `suite` –≤–∏–¥–∞—î –ø–æ–º–∏–ª–∫—É, —Ç–æ —ó—ó —Ç–∏–ø, –∑–Ω–∞—á–µ–Ω–Ω—è —ñ –ø–æ–≤–Ω–∏–π —Ç—Ä–µ–π—Å–±–µ–∫ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —É –º–µ—Ç–æ–¥ `__exit__` 

 –ó–∞–∑–≤–∏—á–∞–π –º–µ–Ω–µ–¥–∂–µ—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –≤–∏–∫–ª–∏–∫–∞—é—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó with, , —è–∫–∞ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Ä–µ—Å—É—Ä—Å–∏ –±—É–¥—É—Ç—å –∑–∞–∫—Ä–∏—Ç—ñ –∞–±–æ –∑–≤—ñ–ª—å–Ω–µ–Ω—ñ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞. –ê–ª–µ —ó—Ö —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —à–ª—è—Ö–æ–º –ø—Ä—è–º–æ–≥–æ –≤–∏–∫–ª–∏–∫—É —ó—Ö–Ω—ñ—Ö –º–µ—Ç–æ–¥—ñ–≤ (`__enter__`, `__exit__`).

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —á–µ—Ä–µ–∑ `with`:**
```python
with open("data.txt", "r") as f:
    content = f.read()
# –¢—É—Ç —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–∫—Ä–∏—Ç–æ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –±—É–ª–æ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è
```

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –±–µ–∑ `with`:**
```python
cm = open("data.txt", "w")  # —Å—Ç–≤–æ—Ä–∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä
try:
    cm.__enter__()  # –≤—Ö—ñ–¥ —É –∫–æ–Ω—Ç–µ–∫—Å—Ç
    cm.write("–ü—Ä–∏–≤—ñ—Ç –±–µ–∑ with!\n")
except Exception as e:
    # –ü–µ—Ä–µ–¥–∞—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫—É –≤ __exit__
    import sys
    exc_info = sys.exc_info()  # (type, value, traceback)
    cm.__exit__(*exc_info)
else:
    cm.__exit__(None, None, None)  # –≤–∏—Ö—ñ–¥ —ñ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
```
---
## <h2 style = 'text-align:center'><b>üìå –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</b></h2>
---
–†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–∂–Ω–∞:

* –ß–µ—Ä–µ–∑ –∫–ª–∞—Å–∏
* –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@contextmanager` —ñ–∑ –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ –º–æ–¥—É–ª—è `contextlib`

**–ö–ª–∞—Å–æ–≤–∏–π —Å–ø–æ—Å—ñ–±**
```python
class MyCM:
    def __enter__(self):
        print("–í—Ö—ñ–¥ —É –∫–æ–Ω—Ç–µ–∫—Å—Ç")
        return "–î–∞–Ω—ñ"
    
    def __exit__(self, exc_type, exc_value, tb):
        print("–í–∏—Ö—ñ–¥ —ñ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É")
        print("–¢–∏–ø –ø–æ–º–∏–ª–∫–∏:  ", exc_type)
        print("–û–±'—î–∫—Ç –ø–æ–º–∏–ª–∫–∏:", exc_value)
        print("Traceback:    ", tb)
        # –Ø–∫—â–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ True ‚Äî –ø–æ–º–∏–ª–∫–∞ –±—É–¥–µ –ø—Ä–∏–≥–ª—É—à–µ–Ω–∞
        return True

with MyCM() as data:
    print('Working...')
    print('Data = ', data)
```
üßæ –í–∏–≤—ñ–¥
```mkdocs
–í—Ö—ñ–¥ —É –∫–æ–Ω—Ç–µ–∫—Å—Ç
Working...
Data =  –î–∞–Ω—ñ
–í–∏—Ö—ñ–¥ —ñ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
–¢–∏–ø –ø–æ–º–∏–ª–∫–∏:   None
–û–±'—î–∫—Ç –ø–æ–º–∏–ª–∫–∏: None
Traceback:     None
```
**–î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@contextmanager` —ñ–∑ `contextlib`**
```python
from contextlib import contextmanager

@contextmanager
def my_context():
    print("–í—Ö–æ–¥–∏–º–æ")
    yield "–†–µ—Å—É—Ä—Å"
    print("–í–∏—Ö–æ–¥–∏–º–æ")

with my_context() as res:
    print("–í—Å–µ—Ä–µ–¥–∏–Ω—ñ:", res)

```
- üîß yield —Ä–æ–∑–¥—ñ–ª—è—î –≤—Ö—ñ–¥ —ñ –≤–∏—Ö—ñ–¥ –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
- –±–ª–æ–∫ –∫–æ–¥—É –¥–æ yield —î –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–º —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–µ—Ç–æ–¥—É `__enter__`
- –±–ª–æ–∫ –∫–æ–¥—É –ø—ñ—Å–ª—è –≤–∏—Ä–∞–∑—É yield –∞–Ω–∞–ª–æ–≥—ñ—á–Ω–∏–π —Ä–µ–∞–ª—ñ–∑–∞—Ü—ó –º–µ—Ç–æ–¥—É `__exit__`


---
## <h2 style = 'text-align:center'><b>üìå –ü—Ä–∏–∫–ª–∞–¥–∏</b></h2>
---
### **‚è± –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ç–∞–π–º–µ—Ä–∞**

–¶–µ–π –º–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–º—ñ—Ä—é—î, —Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –∑–∞–π–º–∞—î –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±–ª–æ–∫—É –∫–æ–¥—É.
```python
import time

class Timer:
    def __enter__(self):
        self.start = time.time()
        return self  # –º–æ–∂–Ω–∞ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –æ–±'—î–∫—Ç, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ

    def __exit__(self, exc_type, exc_value, traceback):
        self.end = time.time()
        self.interval = self.end - self.start
        print(f"–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è: {self.interval:.4f} —Å–µ–∫—É–Ω–¥")

# –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
with Timer():
    total = sum(range(1000000))
```
- `__enter__` –∑–±–µ—Ä—ñ–≥–∞—î —á–∞—Å –ø–æ—á–∞—Ç–∫—É
- `__exit__` –æ–±—á–∏—Å–ª—é—î —á–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —ñ –≤–∏–≤–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### **üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è**

–¶–µ–π –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–ø–∏—Å—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–æ –ª–æ–≥-—Ñ–∞–π–ª—É –ø—Ä–∏ –≤—Ö–æ–¥—ñ —Ç–∞ –≤–∏—Ö–æ–¥—ñ –∑ –±–ª–æ–∫—É.
```python
from contextlib import contextmanager

@contextmanager
def log_action(action_name):
    with open("log.txt", "a") as log_file:
        log_file.write(f"[START] {action_name}\n")
        try:
            yield
        finally:
            log_file.write(f"[END] {action_name}\n")

# –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
with log_action("–û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö"):
    print("–¢—É—Ç –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –æ–±—Ä–æ–±–∫–∞...")
```
üìÅ –£ —Ñ–∞–π–ª `log.txt` –±—É–¥–µ –∑–∞–ø–∏—Å–∞–Ω–æ:
```
[START] –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
[END] –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö
```

### **üìÇ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä: —Ç–∏–º—á–∞—Å–æ–≤–∞ –∑–º—ñ–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ**

```python
import os

class SafeChangeDirectory:
    def __init__(self, new_path):
        self.new_path = new_path
        self.original_path = os.getcwd()

    def __enter__(self):
        if not os.path.exists(self.new_path):
            print(f"–î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è '{self.new_path}' –Ω–µ —ñ—Å–Ω—É—î. –°—Ç–≤–æ—Ä—é—é...")
            os.makedirs(self.new_path)
        else:
            print(f"–î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è '{self.new_path}' –≤–∂–µ —ñ—Å–Ω—É—î.")
        os.chdir(self.new_path)
        print(f"–ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ: {self.new_path}")

    def __exit__(self, exc_type, exc_value, traceback):
        os.chdir(self.original_path)
        print(f"–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ: {self.original_path}")
```
‚úÖ –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
```
print("–ü–æ—Ç–æ—á–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è:", os.getcwd())

with SafeChangeDirectory("test_folder"):
    print("–í—Å–µ—Ä–µ–¥–∏–Ω—ñ –±–ª–æ–∫—É:", os.getcwd())

print("–ü—ñ—Å–ª—è –±–ª–æ–∫—É:", os.getcwd())
```


